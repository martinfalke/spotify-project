(this["webpackJsonplistify-project"]=this["webpackJsonplistify-project"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n,r,s,c,i,o,l=a(0),u=a.n(l),b=a(35),j=a.n(b),d=a(28),p=a(41),O=a(3),f=a(10),h="AUTH_INIT_TEST",m="AUTH_SPOTIFY",x="AUTH_SPOTIFY_ERROR",y="AUTH_SPOTIFY_SET_STATE",g="AUTH_SPOTIFY_LOGOUT",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(f.a)({type:e},t)},k=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},S={status:null,spotify:{token:null,expires_in:0,spotify_string:null,error:null}},_=k(S,(n={},Object(O.a)(n,h,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(n,m,(function(e,t){var a;return localStorage.setItem("spotifyToken",t.token),localStorage.setItem("spotifyExpiration",(a=3595,new Date(Date.now()+1e3*a)).toUTCString()),Object(f.a)(Object(f.a)({},e),{},{spotify:{token:t.token,expires_in:t.expires_in,spotify_string:e.spotify.spotify_string,error:null}})})),Object(O.a)(n,x,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{spotify:{token:null,expires_in:null,spotify_string:e.spotify.spotify_string,error:t.error}})})),Object(O.a)(n,y,(function(e,t){return localStorage.setItem("spotifyState",t.spotify_string),Object(f.a)(Object(f.a)({},e),{},{spotify:Object(f.a)(Object(f.a)({},e.spotify),{},{spotify_string:t.spotify_string})})})),Object(O.a)(n,g,(function(e,t){return localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),Object(f.a)({},S)})),n)),T="FBASE_INIT",E="FBASE_INIT_COMPLETED",I="FBASE_AUTHENTICATE",A="FBASE_AUTHENTICATE_SUCCESS",P="FBASE_SET_UID",w="FBASE_SIGN_OUT",N="FBASE_SIGN_OUT_SUCCESS",R="FBASE_SIGN_OUT_ERROR",L={status:null,app:null,auth:null,uid:""},C=k(L,(r={},Object(O.a)(r,E,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK",app:t.payload.app,auth:t.payload.auth})})),Object(O.a)(r,A,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"},t.payload)})),Object(O.a)(r,P,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{uid:t.uid})})),Object(O.a)(r,w,(function(e,t){return Object(f.a)({},L)})),Object(O.a)(r,N,(function(e,t){return Object(f.a)({},L)})),Object(O.a)(r,R,(function(e,t){return Object(f.a)(Object(f.a)({},L),{},{status:"ERROR"})})),r)),U="SEARCH_INIT_TEST",F="SEARCH_GET",D="SEARCH_GET_ERROR",M="SEARCH_GET_SUCCESS",G="SEARCH_NEXT",Y="SEARCH_PREV",B={status:null,latestQuery:null,activePage:null,isExact:!1,resultTypes:["track"]},K=k(B,(s={},Object(O.a)(s,U,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"initialized"})})),Object(O.a)(s,F,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Query accepted"})})),Object(O.a)(s,M,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:t.payload,status:"API OK"})})),Object(O.a)(s,D,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:B.activePage,status:"API ERROR"})})),Object(O.a)(s,G,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Next Page Found"})})),Object(O.a)(s,Y,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Prev Page Found"})})),s)),V="USER_INIT",H="USER_GET",z="USER_GET_SUCCESS",Q="USER_GET_ERROR",J={status:null,id:null,display_name:null,country:null,error:null},X=k(J,(c={},Object(O.a)(c,V,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(c,z,(function(e,t){return Object(f.a)(Object(f.a)(Object(f.a)({},e),t.payload),{},{error:null,status:"OK"})})),Object(O.a)(c,Q,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(c,g,(function(e,t){return J})),c)),W=a(29),q="PLAYLIST_MOVE_UP_SONG",Z="PLAYLIST_MOVE_DOWN_SONG",$="PLAYLIST_DELETE_FROM_LIST",ee="PLAYLIST_GET",te="PLAYLIST_TRACK_GET",ae="PLAYLIST_MOVE_UP_SONG_SUCCESS",ne="PLAYLIST_MOVE_UP_SONG_ERROR",re="PLAYLIST_MOVE_DOWN_SONG_SUCCESS",se="PLAYLIST_MOVE_DOWN_SONG_ERROR",ce="PLAYLIST_DELETE_FROM_LIST_SUCCESS",ie="PLAYLIST_DELETE_FROM_LIST_ERROR",oe="PLAYLIST_GET_SUCCESS",le="PLAYLIST_GET_ERROR",ue="PLAYLIST_TRACK_GET_SUCCESS",be="PLAYLIST_TRACK_GET_ERROR",je="PLAYLIST_TRACK_GET_ALL_DONE",de="PLAYLIST_SELECT",pe="PLAYLIST_FETCH_PROGRESS",Oe="PLAYLIST_ADD_TO_TRACKS",fe="DELETE_FROM_TRACKS",he="TRACKS_SAVE_LOCATION",me="TRACKS_DELETE_LOCATIONS",xe=k({status:null,error:null,selectedList:"",playlists:{},trackIndex:{},featureMaps:{},playlistsFetched:!1,tracksFetched:!1,fetchProgress:null},(i={},Object(O.a)(i,oe,(function(e,t){if(!t.payload.playlists||0===Object.keys(t.payload.playlists).length)return Object(f.a)(Object(f.a)({},e),{},{playlistsFetched:!0});var a={};return t.payload.playlists.forEach((function(e){a[e.id]={snapshot_id:e.snapshot_id,name:e.name,id:e.id,owner:e.owner.display_name||e.owner.id,description:e.description,image:e.images.length>=2&&e.images[1]||null,external_urls:e.external_urls,collaborative:e.collaborative,tracks:null}})),Object(f.a)(Object(f.a)({},e),{},{playlists:a,playlistsFetched:!0,selectedList:Object.values(a)[0].id,status:"Fetch Playlists Success"})})),Object(O.a)(i,le,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,ue,(function(e,t){var a=t.payload.playlist_id,n=t.payload.tracks.map((function(e){return e.id})),r=e.trackIndex,s=t.payload.tracks;s.forEach((function(e){r.hasOwnProperty(e.id)||(r[e.id]=e)}));var c=e.playlists[a];return s&&null===c.image&&(c.image=s.length>=1&&s[0].album_image?t.payload.tracks[0].album_image:null),Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},a,Object(f.a)(Object(f.a)({},e.playlists[a]),{},{tracks:n}))),trackIndex:Object(f.a)({},r)})})),Object(O.a)(i,be,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,je,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{tracksFetched:!0})})),Object(O.a)(i,ae,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI;if(0===n)return e;var r=e.playlists[e.selectedList],s=r.tracks,c=s[n-1];return s[n-1]=s[n],s[n]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(W.a)(s)})))})})),Object(O.a)(i,ne,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,re,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI,r=e.playlists[e.selectedList];if(n===r.tracks.length-1)return e;var s=r.tracks,c=s[n];return s[n]=s[n+1],s[n+1]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(W.a)(s)})))})})),Object(O.a)(i,se,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,ce,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI,r=e.playlists[e.selectedList],s=r.tracks,c=s.slice(0,n).concat(s.slice(n+1,s.length));return Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:c})))})})),Object(O.a)(i,ie,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,de,(function(e,t){var a=t.playlistId;return Object(f.a)(Object(f.a)({},e),{},{selectedList:a})})),Object(O.a)(i,pe,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{fetchProgress:t.currentPercentage})})),Object(O.a)(i,Oe,(function(e,t){var a=t.trackId,n=t.track,r=e.trackIndex;if(!r.hasOwnProperty(a)&&n){var s={album_name:n.album.name,album_image:n.album.images.length>=2&&n.album.images[1]||null,artists:n.artists.map((function(e){return e.name})),is_local:n.is_local,external_urls:n.external_urls,name:n.name,id:n.id,preview_url:n.preview_url,uri:n.uri,duration:n.duration_ms};r[a]=s}return Object(f.a)(Object(f.a)({},e),{},{trackIndex:Object(f.a)({},r)})})),i)),ye=k({status:null,stash:[],selectedTrack:"",trackLocations:{},previewPlayer:{}},(o={},Object(O.a)(o,me,(function(e,t){var a=t.payload.playlistId,n=t.payload.trackId,r=e.trackLocations[n];return Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)(Object(f.a)({},e.trackLocations),{},Object(O.a)({},n,Object(f.a)(Object(f.a)({},r),{},Object(O.a)({},a,!1))))})})),Object(O.a)(o,Oe,(function(e,t){var a=t.trackId,n=e.stash;return e.stash.includes(a)||(n=[].concat(Object(W.a)(e.stash),[a])),Object(f.a)(Object(f.a)({},e),{},{stash:n})})),Object(O.a)(o,fe,(function(e,t){var a=t.CI,n=t.trackId,r=e.stash;if(n){if(!r.includes(n))return Object(f.a)({},e);r.reduce((function(e,t,r){t===n&&(a=r)}))}var s=r.slice(0,a).concat(r.slice(a+1,r.length));return Object(f.a)(Object(f.a)({},e),{},{stash:s})})),Object(O.a)(o,he,(function(e,t){var a=t.payload.playlist_id,n=t.payload.trackIds,r=e.trackLocations;return n.forEach((function(e){r.hasOwnProperty(e)||(r[e]={}),r[e][a]||(r[e][a]=!0)})),Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)({},r)})})),o)),ge=Object(p.c)({auth:_,fbase:C,search:K,user:X,lists:xe,tracks:ye}),ve=a(1),ke=a.n(ve),Se=a(12),_e=a(55),Te=ke.a.mark(Ie),Ee=ke.a.mark(Ae);function Ie(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(Se.h)(h);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),Te)}function Ae(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([Object(Se.j)(h,Ie)]);case 2:case"end":return e.stop()}}),Ee)}var Pe=Ae,we=a(83),Ne={apiKey:"AIzaSyD8zs9oK-BvtUICviOHLrVpcNOzbMvUR_k",authDomain:"listify-project-56d94.firebaseapp.com",databaseURL:"https://listify-project-56d94-default-rtdb.europe-west1.firebasedatabase.app",projectId:"listify-project-56d94",storageBucket:"listify-project-56d94.appspot.com",messagingSenderId:"108020178071",appId:"1:108020178071:web:b81127db0ed946e8abddd2"},Re=a(38);a(70);function Le(e){return Object(Re.e)(e).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}function Ce(e){return Object(Re.f)(e).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}var Ue=ke.a.mark(Ge),Fe=ke.a.mark(Ye),De=ke.a.mark(Be),Me=ke.a.mark(Ke);function Ge(){var e,t;return ke.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Se.c)(we.a,Ne);case 2:return e=a.sent,a.next=5,Object(Se.c)(Re.c,e,{persistence:Re.a,popupRedirectResolver:void 0});case 5:return t=a.sent,a.next=8,Object(Se.f)({type:E,payload:{app:e,auth:t}});case 8:case"end":return a.stop()}}),Ue)}function Ye(){var e,t,a,n;return ke.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(Re.b)(),r.next=3,Object(Se.c)(Le,e);case 3:if(t=r.sent,a=t.response,!(n=t.error)){r.next=11;break}return r.next=9,Object(Se.f)({type:"FBASE_AUTHENTICATE_ERROR",payload:n});case 9:r.next=13;break;case 11:return r.next=13,Object(Se.f)({type:A,payload:Object(f.a)({},a)});case 13:case"end":return r.stop()}}),Fe)}function Be(){var e,t;return ke.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object(Re.b)(),a.next=3,Object(Se.f)({type:g});case 3:return a.next=5,Object(Se.c)(Ce,e);case 5:if(t=a.sent,t.response,!t.error){a.next=13;break}return a.next=11,Object(Se.f)({type:R});case 11:a.next=15;break;case 13:return a.next=15,Object(Se.f)({type:N});case 15:case"end":return a.stop()}}),De)}function Ke(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([Object(Se.k)(T,Ge),Object(Se.j)(I,Ye),Object(Se.k)(w,Be)]);case 2:case"end":return e.stop()}}),Me)}var Ve=Ke,He="https://api.spotify.com/v1",ze="PUT",Qe="DELETE";function Je(e){return e.json().then((function(t){if(!e.ok){var a=429===e.status?{retry_after:e.headers.get("retry-after")}:{},n=Object.assign(a,t,{status:e.status,statusText:e.statusText});return Promise.reject(n)}return t}))}var Xe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"application/json",s=t.startsWith("/")?t:"/"+t,c={Authorization:"Bearer "+e},i={method:a,headers:c};return 0!==Object.keys(n).length&&(i.body=JSON.stringify(n),c["Content-Type"]=r),fetch(He+s,i).then(Je).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))},We=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&offset=0&limit=20",r="/search",s=a.reduce((function(e,t,a,n){return n.length-1!==a?e+t+",":e+t})),c="?q="+encodeURIComponent(t)+"&type="+encodeURIComponent(s)+"&market=from_token";return Xe(e,r+c+n)},qe=ke.a.mark(tt),Ze=ke.a.mark(at),$e=ke.a.mark(nt),et=ke.a.mark(rt);function tt(e){var t,a,n,r,s;return ke.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Se.g)(st);case 2:return t=c.sent,c.next=5,Object(Se.c)(We,e.token,e.query,t);case 5:if(a=c.sent,n=a.response,!(r=a.error)){c.next=13;break}return c.next=11,Object(Se.f)({type:D,payload:r.error});case 11:c.next=16;break;case 13:return s=n.tracks,c.next=16,Object(Se.f)({type:M,payload:s});case 16:case"end":return c.stop()}}),qe)}function at(e){var t,a,n,r,s,c;return ke.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Se.g)(ct);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(He.length),i.next=7,Object(Se.c)(Xe,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(Se.f)({type:D,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(Se.f)({type:M,payload:c});case 18:case"end":return i.stop()}}),Ze)}function nt(e){var t,a,n,r,s,c;return ke.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Se.g)(it);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(He.length),i.next=7,Object(Se.c)(Xe,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(Se.f)({type:D,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(Se.f)({type:M,payload:c});case 18:case"end":return i.stop()}}),$e)}function rt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([Object(Se.j)(F,tt),Object(Se.j)(G,at),Object(Se.j)(Y,nt)]);case 2:case"end":return e.stop()}}),et)}var st=function(e){return e.search.resultTypes},ct=function(e){return e.search.activePage.next},it=function(e){return e.search.activePage.previous},ot=rt,lt=function(e){return Xe(e,"/me")},ut=ke.a.mark(jt),bt=ke.a.mark(dt);function jt(e){var t,a,n,r,s;return ke.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Se.c)(lt,e.token);case 2:if(t=c.sent,a=t.response,!(n=t.error)){c.next=12;break}return c.next=8,Object(Se.f)({type:w});case 8:return c.next=10,Object(Se.f)({type:Q,payload:n.error});case 10:c.next=16;break;case 12:return s={id:(r=a).id,display_name:r.display_name,country:r.country},c.next=16,Object(Se.f)({type:z,payload:s});case 16:case"end":return c.stop()}}),ut)}function dt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([Object(Se.j)(H,jt)]);case 2:case"end":return e.stop()}}),bt)}var pt=dt,Ot={moveUpSong:function(e,t,a,n){return v(q,{token:e,playlistId:t,CI:a,snapshot_id:n})},moveDownSong:function(e,t,a,n){return v(Z,{token:e,playlistId:t,CI:a,snapshot_id:n})},deleteFromList:function(e,t,a,n,r,s){return v($,{token:e,playlistId:t,track_uri:a,snapshot_id:n,CI:r,trackId:s})},fetchPlaylists:function(e){return v(ee,{token:e})},fetchTrack:function(e,t){return v(te,{token:e,playlistId:t})},selectPlaylist:function(e){return v(de,{playlistId:e})}},ft=function(e,t){return Xe(e,"/me/playlists?offset="+t+"&limit=50")},ht=function(e,t,a){return Xe(e,"/playlists/"+t+"/tracks?market=from_token&offset="+a+"&limit=100")},mt=function(e,t,a,n,r){return Xe(e,"/playlists/"+t+"/tracks",ze,{range_start:a,insert_before:n,snapshot_id:r})},xt=function(e,t,a,n){return Xe(e,"/playlists/"+t+"/tracks",Qe,{tracks:a,snapshot_id:n})},yt=ke.a.mark(It),gt=ke.a.mark(At),vt=ke.a.mark(Pt),kt=ke.a.mark(wt),St=ke.a.mark(Nt),_t=ke.a.mark(Rt),Tt=ke.a.mark(Lt),Et=function(e){return e.auth.spotify.token};function It(e){var t,a,n,r,s,c,i,o;return ke.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(Se.g)(Et);case 2:return t=l.sent,a=e.playlistId,n=e.CI,r=e.CI-1,s=e.snapshot_id,l.next=9,Object(Se.c)(mt,t,a,n,r,s);case 9:if(c=l.sent,i=c.response,o=c.error){l.next=17;break}return l.next=15,Object(Se.f)({type:ae,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 15:l.next=19;break;case 17:return l.next=19,Object(Se.f)({type:ne,payload:o.error});case 19:case"end":return l.stop()}}),yt)}function At(e){var t,a,n,r,s,c,i,o;return ke.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(Se.g)(Et);case 2:return t=l.sent,a=e.playlistId,n=e.CI+1,r=e.CI,s=e.snapshot_id,l.next=9,Object(Se.c)(mt,t,a,n,r,s);case 9:if(c=l.sent,i=c.response,o=c.error){l.next=17;break}return l.next=15,Object(Se.f)({type:re,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 15:l.next=19;break;case 17:return l.next=19,Object(Se.f)({type:se,payload:o.error});case 19:case"end":return l.stop()}}),gt)}function Pt(e){var t,a,n,r,s,c,i,o;return ke.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(Se.g)(Et);case 2:return t=l.sent,a=e.playlistId,n=e.snapshot_id,r=e.trackId,s=[{uri:e.track_uri,positions:[e.CI]}],l.next=9,Object(Se.c)(xt,t,a,s,n);case 9:if(c=l.sent,i=c.response,o=c.error){l.next=19;break}return l.next=15,Object(Se.f)({type:me,payload:{playlistId:a,trackId:r}});case 15:return l.next=17,Object(Se.f)({type:ce,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 17:l.next=21;break;case 19:return l.next=21,Object(Se.f)({type:ie,payload:o.error});case 21:case"end":return l.stop()}}),vt)}function wt(e){var t,a,n,r,s,c,i,o,l,u,b;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.f)({type:pe,currentPercentage:0});case 2:return e.next=4,Object(Se.g)(Et);case 4:return t=e.sent,a=0,e.next=8,Object(Se.c)(ft,t,a);case 8:if(s=e.sent,n=s.response,!(r=s.error)){e.next=17;break}if(401!==r.status){e.next=15;break}return e.next=15,Object(Se.f)({type:w});case 15:e.next=57;break;case 17:c=n.total,i=c>50,o=n.items;case 20:if(!i||r){e.next=38;break}return a+=20,e.next=24,Object(Se.c)(ft,t,a);case 24:if(l=e.sent,n=l.response,r=l.error){e.next=31;break}o=o.concat(n.items),e.next=35;break;case 31:if(429!==r.status){e.next=35;break}return a-=50,e.next=35,Object(Se.d)(1e3*r.retry_after);case 35:i=c>a+50,e.next=20;break;case 38:if(r){e.next=55;break}return e.next=41,Object(Se.g)(Ct);case 41:if(u=e.sent,b=o.filter((function(e){return e.owner.id===u})),0!==c&&0!==b.length){e.next=51;break}return e.next=46,Object(Se.f)({type:pe,currentPercentage:100});case 46:return e.next=48,Object(Se.f)({type:oe,payload:{}});case 48:return e.next=50,Object(Se.f)({type:je});case 50:return e.abrupt("return");case 51:return e.next=53,Object(Se.f)({type:oe,payload:{playlists:b}});case 53:e.next=57;break;case 55:return e.next=57,Object(Se.f)({type:le,payload:r.error});case 57:case"end":return e.stop()}}),kt)}function Nt(e){var t,a,n,r,s,c,i,o,l,u,b,j;return ke.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(Se.g)(Et);case 2:return t=d.sent,a=e.playlistId,n=0,d.next=7,Object(Se.c)(ht,t,a,n);case 7:if(c=d.sent,r=c.response,!(s=c.error)){d.next=13;break}d.next=47;break;case 13:i=r.total,o=i>100,l=r.items;case 16:if(!o||s){d.next=36;break}return n+=100,d.next=20,Object(Se.c)(ht,t,a,n);case 20:if(u=d.sent,r=u.response,s=u.error){d.next=27;break}l=l.concat(r.items),d.next=33;break;case 27:if(429!==s.status){d.next=33;break}return n-=100,d.next=31,Object(Se.d)(1e3*s.retry_after);case 31:d.next=33;break;case 33:o=i>n+100,d.next=16;break;case 36:if(s){d.next=45;break}return b=l.filter((function(e){return!e.is_local})).map((function(e){var t=e.track;return{album_name:t.album?t.album.name:"No Album",album_image:t.album&&t.album.images.length>=2&&t.album.images[1]||null,artists:t.artists.map((function(e){return e.name})),is_local:t.is_local,external_urls:t.external_urls,name:t.name,id:t.id,preview_url:t.preview_url,uri:t.uri,duration:t.duration_ms}})),j=r.items.map((function(e){return e.track.id})),d.next=41,Object(Se.f)({type:ue,payload:{playlist_id:a,tracks:b}});case 41:return d.next=43,Object(Se.f)({type:he,payload:{playlist_id:a,trackIds:j}});case 43:d.next=47;break;case 45:return d.next=47,Object(Se.f)({type:be,payload:s.error});case 47:case"end":return d.stop()}}),St)}function Rt(){var e,t,a,n,r;return ke.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=_e.a.expanding(10),s.next=3,Object(Se.a)(te,e);case 3:t=s.sent,a=0;case 5:if(!(a<=0)&&e.isEmpty()){s.next=19;break}return s.next=8,Object(Se.h)(t);case 8:return n=s.sent,s.next=11,Object(Se.c)(Nt,n);case 11:return a++,s.next=14,Object(Se.g)(Ut);case 14:return r=s.sent,s.next=17,Object(Se.f)({type:pe,currentPercentage:Math.round(a/r*100)});case 17:s.next=5;break;case 19:return s.next=21,Object(Se.f)({type:je});case 21:case"end":return s.stop()}}),_t)}function Lt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([Object(Se.i)(q,It),Object(Se.i)(Z,At),Object(Se.k)($,Pt),Object(Se.k)(ee,wt),Object(Se.e)(Rt)]);case 2:case"end":return e.stop()}}),Tt)}var Ct=function(e){return e.user.id},Ut=function(e){return Object.keys(e.lists.playlists).length},Ft=Lt,Dt={deleteFromList:function(e){return v(me,{playlistId:e})},addToTracks:function(e,t){return v(Oe,{trackId:e,track:t})},deleteFromTracks:function(e,t){return v(fe,{CI:e,trackId:t})}},Mt=ke.a.mark(Gt);function Gt(e){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.b)([]);case 2:case"end":return e.stop()}}),Mt)}var Yt=Gt,Bt=ke.a.mark(Kt);function Kt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.c)(_e.b);case 2:return e.sent,e.next=5,Object(Se.e)(Pe);case 5:return e.next=7,Object(Se.e)(Ve);case 7:return e.next=9,Object(Se.e)(ot);case 9:return e.next=11,Object(Se.e)(pt);case 11:return e.next=13,Object(Se.e)(Ft);case 13:return e.next=15,Object(Se.e)(Yt);case 15:case"end":return e.stop()}}),Bt)}window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();var Vt=Object(_e.c)(),Ht=Object(p.e)(ge,Object(p.a)(Vt));Vt.run(Kt);var zt=a(75),Qt=(a(98),a(24)),Jt=(a(99),a(20)),Xt=(a(100),a(118)),Wt=a(119),qt=a(40),Zt=a.p+"static/media/LOGO.846060d1.svg",$t=a(79),ea={initSearch:function(){return v(U)},getSearchResults:function(e,t){return v(F,{token:e,query:t})},getNextPage:function(e){return v(G,{token:e})},getPreviousPage:function(e){return v(Y,{token:e})}},ta=(a(101),a(48)),aa=a.p+"static/media/BGimg.7e2b74e4.png",na=a.p+"static/media/Search.8d2bd43b.svg",ra=a(4);var sa=function(e){return Object(ra.jsxs)("div",{className:"searchview",children:[Object(ra.jsx)("img",{alt:"background",src:aa})," ",Object(ra.jsxs)("div",{className:"searchcontainer",children:[Object(ra.jsx)("h6",{children:"Listify helps you manage and find inspiration for your playlists"}),Object(ra.jsxs)("div",{className:"s-searchbar",children:[Object(ra.jsx)("form",{className:"s-searchinput",children:Object(ra.jsx)(ta.a.Group,{controlId:"formSearchInput",children:Object(ra.jsx)(ta.a.Control,{autoFocus:e.tabVisible,type:"text",placeholder:"Search for a song, an artist, or an album...",onChange:function(t){return e.onSearch(t.target.value)}})})}),Object(ra.jsx)("img",{alt:"",src:na})," "]})]})]})},ca=(a(104),a(52)),ia=a(44),oa=a(56),la=a.p+"static/media/Spotify_Icon.cd66b8f6.png",ua=a.p+"static/media/Inboxes fill.043f2be9.svg",ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHRSURBVHgB7ZRfTttAEMa/WTt/3QcfITdoOAFwgqZSW0d9IicoPQHpCdobNH0jSiXCCZobkJ4A9wQ1EoRgszPMGiEBckwS8oT4SbGS3fm+yc54h7CA7EN9B8bsYBmYJ5Xf80nRFhUtStT4wjA/sBL81RtePq1JPwdtGwXCUfMIS+JinSb9GLQf75n7P6Rbb3lWnHFMV9UeluQ2VmLP4OhSPRYnYE/NKUzJ7tI4SbAkLtYQ7+rXsJZ7FCSQKPguhLaI6TUO5zFWhFTjtLmHej3YdE11Ncy6b/p4Js7DedmosZ8ndk31LE4IMjbD2XtsANd0AXUsY4ts1DzVPK0ygUCO/eGs82BNy8DAPsqJffckwdSqSVGEB3oHou3H6wzpkFCpTvvR8iGUMMm/ynDWLwrUmk6MyB/51DyYG/5Vn9cT1LID/fctFvQqo9mgSMdRsC3A1Ojx/xLoLRZQOTyfMNE3/fSr4p1yLfvvSuPW/NHFYJFOBKE+z3whSnRehChBk/T1Eg6u2ewJSULkTV3iMg3yVx7HdN0N9rQHPy2nW9VRNsUGcBOB9bRW5xNJJwy5lp489SatQZxPhLuM7vjYEK6MlmS8zkRYmdeL9nrR1uNlXbQbkzZdLHjynWgAAAAASUVORK5CYII=";var ja=function(e){return Object(ra.jsx)("div",{className:"searchresultview",children:Object(ra.jsxs)("div",{className:"searchresultcontainer",children:[Object(ra.jsxs)("div",{className:"sr-searchbar",children:[Object(ra.jsx)("form",{className:"sr-searchinput",children:Object(ra.jsx)(ta.a.Group,{controlId:"formSearchInput",children:Object(ra.jsx)(ta.a.Control,{autoFocus:e.tabVisible,defaultValue:e.search,type:"text",placeholder:"Search for a song, an artist or an album",onChange:function(t){return e.onSearch(t.target.value)}})})}),Object(ra.jsx)("img",{alt:"search icon",src:na})]}),Object(ra.jsx)(ca.a,{size:"sm",children:Object(ra.jsx)("thead",{children:Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("th",{class:"th-index",children:" "}),Object(ra.jsx)("th",{class:"th-songname text-muted",children:"Name "}),Object(ra.jsx)("th",{class:"th-songartist text-muted",children:"Artist"}),Object(ra.jsx)("th",{class:"th-songalbum text-muted",children:"Album"}),Object(ra.jsx)("th",{class:"th-actions text-muted",children:"Actions"})]})})}),Object(ra.jsxs)("div",{className:"resultscontainer",children:[e.results.map((function(t,a){return Object(ra.jsxs)("div",{className:"songitem",children:[Object(ra.jsx)("div",{className:"cd-cover",children:Object(ra.jsx)("img",{alt:"song album cover",className:"songitem-cover",src:t.image})}),Object(ra.jsx)(oa.a,{children:Object(ra.jsxs)("div",{className:"cardcontent",children:[Object(ra.jsx)("p",{className:"cd-name text-muted",children:Object(ra.jsx)("a",{href:t.spotifyUrl,children:t.track})}),Object(ra.jsxs)("p",{className:"cd-artist text-muted",children:[Object(ra.jsx)("i",{class:"fas fa-user"}),t.artist]}),Object(ra.jsxs)("p",{className:"cd-album text-muted",children:[Object(ra.jsx)("i",{class:"fas fa-record-vinyl"}),t.album]}),Object(ra.jsxs)("div",{className:"cd-Actions",children:[Object(ra.jsx)(ia.a,{variant:"light",onClick:t.isInStash?function(){return e.onDeleteFromTracks(a)}:function(){return e.onAddToTracks(a)},children:Object(ra.jsx)("img",{alt:"remove from track stash",src:t.isInStash?ua:ba})}),Object(ra.jsx)("a",{href:t.spotifyUrl,children:Object(ra.jsx)("img",{alt:"open song in Spotify",src:la,className:"openinspotify"})})]})]})})]},a)})),Object(ra.jsx)("div",{className:"Pagenav",children:Object(ra.jsxs)("nav",{children:[Object(ra.jsxs)("ul",{class:"pagination",children:[Object(ra.jsx)("li",{class:1===e.currentPage?"page-item disabled":"page-item",children:Object(ra.jsxs)("span",{class:"page-link","aria-label":"Previous",onClick:e.onPrevPage,disabled:1===e.currentPage,children:[Object(ra.jsx)("span",{"aria-hidden":"true"}),Object(ra.jsx)("span",{class:"sr-only",children:"Previous"}),"Previous"]})}),Object(ra.jsx)("li",{class:e.currentPage===e.numPages?"page-item disabled":"page-item",children:Object(ra.jsxs)("span",{class:"page-link","aria-label":"Next",onClick:e.onNextPage,disabled:e.currentPage===e.numPages,children:[Object(ra.jsx)("span",{"aria-hidden":"true"}),Object(ra.jsx)("span",{class:"sr-only",children:"Next"}),"Next"]})})]}),Object(ra.jsxs)("p",{children:["Page ",e.currentPage," out of ",e.numPages]})]})})]})]})})},da=(a(105),a(117));var pa=function(e){return Object(ra.jsxs)("div",{className:"playlistview",children:[Object(ra.jsx)("div",{className:"playlistsnav",children:e.allPlaylists&&e.allPlaylists.map((function(t,a){return Object(ra.jsxs)("div",{className:e.selectedPlaylist&&e.selectedPlaylist===t.id||!e.selectedPlaylist&&0===a?"selectedplaylist":"unselectedplaylist",onClick:function(){return e.onSelectPlaylist(t.id)},children:[Object(ra.jsx)("img",{className:t.image?"":"no-img",alt:"playlists",src:t.image?t.image.url:Zt}),Object(ra.jsx)("p",{class:"h6 text-light",children:t.name})]},a)}))||Object(ra.jsx)("p",{className:"no-playlists-text",children:"Your account has no playlists yet."})}),Object(ra.jsxs)("div",{className:"playlistcontent",children:[Object(ra.jsxs)("div",{className:"playlistbanner",children:[Object(ra.jsx)("img",{alt:"selected playlist",className:e.playlist&&e.playlist.image?"":"no-img",src:e.playlist&&e.playlist.image?e.playlist.image.url:Zt}),Object(ra.jsxs)("div",{className:"playlistinfo",children:[Object(ra.jsx)("div",{className:" h4 text-light",children:e.playlist&&e.playlist.name||""}),Object(ra.jsx)("p",{className:" md text-light",children:e.playlist&&e.playlist.description||""}),Object(ra.jsx)("form",{className:"actionsbar",children:Object(ra.jsx)("div",{class:"form-group",children:Object(ra.jsx)("input",{type:"text",class:"form-control",id:"PlaylistSearchAction",placeholder:"search for a song",defaultValue:e.searchTerm,onChange:function(t){return e.onSearchTerm(t.target.value)}})})})]})]}),Object(ra.jsx)(ca.a,{className:"p-tabletitle",size:"sm",children:Object(ra.jsx)("thead",{children:Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("th",{children:"#"}),Object(ra.jsx)("th",{children:"Actions"})]})})}),Object(ra.jsx)("div",{className:"songscontainer",children:e.tracks.map((function(t,a,n){return Object(ra.jsxs)("div",{className:"p-songitem",children:[Object(ra.jsx)("h6",{children:a+1}),Object(ra.jsx)("img",{className:"p-songcover",alt:"song album cover",src:t.image?t.image.url:Zt,width:"48px",height:"48px"}),Object(ra.jsx)(oa.a,{borderless:"1",children:Object(ra.jsxs)("div",{className:"p-cardbody",children:[Object(ra.jsxs)("div",{className:"p-cardcontent",children:[Object(ra.jsx)("div",{className:"p-songname",children:Object(ra.jsx)("a",{href:t.spotifyUrl,children:t.name})}),Object(ra.jsxs)("div",{className:"p-songartist",children:[Object(ra.jsx)("i",{className:"fas fa-user"}),t.artist]}),Object(ra.jsxs)("div",{className:"p-songalbum",children:[Object(ra.jsx)("i",{className:"fas fa-record-vinyl"}),t.album_name]})]}),Object(ra.jsxs)("div",{className:"p-actions",children:[Object(ra.jsx)("div",{onClick:t.isInStash?function(){return e.onDeleteFromTracks(a)}:function(){return e.onAddToTracks(a)},children:t.isInStash?Object(ra.jsx)("button",{className:"trackmarked",children:Object(ra.jsx)("img",{alt:"add to track stash",src:ua})}):Object(ra.jsx)("button",{className:"nottrackmarked",children:Object(ra.jsx)("img",{src:ba})})}),Object(ra.jsxs)(da.a,{children:[Object(ra.jsx)("button",{disabled:!e.actionsDisabled||0==a,onClick:function(){return e.onMoveUpSong(a)},children:Object(ra.jsx)("i",{class:"far fa-arrow-alt-circle-up"})}),Object(ra.jsx)("button",{disabled:!e.actionsDisabled||a===n.length-1,onClick:function(){return e.onMoveDownSong(a)},children:Object(ra.jsx)("i",{class:"far fa-arrow-alt-circle-down"})}),Object(ra.jsx)("button",{disabled:!e.actionsDisabled,onClick:function(){return e.onDeleteSong(a)},children:Object(ra.jsx)("i",{class:"far fa-minus-square"})})]})]})]})})]},a)}))})]})]})};var Oa={getSearchResults:ea.getSearchResults,getNextPage:ea.getNextPage,getPreviousPage:ea.getPreviousPage,addToTracks:Dt.addToTracks,deleteFromTracks:Dt.deleteFromTracks},fa=Object(d.b)((function(e){var t=e.search.activePage&&e.search.activePage.total||0,a=[];return e.search.activePage&&(a=e.search.activePage.items.map((function(t){var a=t.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t.name+", ":e+t.name}),""),n=t.album.images.reduce((function(e,t){return t.height<e.height?t:e}),t.album.images[0]),r=Math.floor(t.duration_ms/1e3/60),s=Math.round((t.duration_ms-1e3*r*60)/1e3),c=e.tracks.stash.includes(t.id);return{artist:a,album:t.album.name,track:t.name,spotifyUrl:t.external_urls.spotify,image:n.url,duration:r+":"+s,previewSong:t.preview_url,id:t.id,isInStash:c}}))),{totalResults:t,results:a,token:e.auth.spotify.token,rawItems:e.search.activePage&&e.search.activePage.items||null}}),Oa)((function(e){var t=Object(l.useState)(""),a=Object(Qt.a)(t,2),n=a[0],r=a[1],s=e.token;Object(l.useEffect)((function(){n&&e.getSearchResults(s,n)}),[n]);var c=Object(l.useState)(!1),i=Object(Qt.a)(c,2),o=i[0],u=i[1];Object(l.useEffect)((function(){var e=new MutationObserver((function(){var e=document.querySelector("#left-tabs-example-tab-search");u(e&&e.classList.contains("active"))})),t=document.querySelector("#left-tabs-example-tab-search");return e.observe(t,{attributes:!0}),function(){return e.disconnect(t)}}),[]),Object(l.useEffect)((function(){o&&document.getElementById("formSearchInput").focus()}),[o]);var b=Object(l.useState)(1),j=Object(Qt.a)(b,2),d=j[0],p=j[1],O=Math.ceil(e.totalResults/20);return n?Object(ra.jsx)(ja,{onSearch:function(e){return r(e)},search:n,results:e.results,currentPage:d,numPages:O,onNextPage:function(){!function(e,t,a){e!==t&&a(e+1)}(d,O,p),e.getNextPage(s)},onPrevPage:function(){!function(e,t){0!==e&&t(e-1)}(d,p),e.getPreviousPage(s)},tabVisible:o,onAddToTracks:function(t){return e.addToTracks(e.results[t].id,e.rawItems[t])},onDeleteFromTracks:function(t){return e.deleteFromTracks(t,e.results[t].id)}}):Object(ra.jsx)(sa,{onSearch:function(e){return r(e)},tabVisible:o})}));a(106);var ha=function(e){var t=e.size,a=e.percentage,n=(e.infoText,"xs"===t?"loading-view-xs":"sm"===t?"loading-view-sm":"md"===t?"loading-view-md":"loading-view-lg");return Object(ra.jsx)("div",{className:"loading-view "+n,children:Object(ra.jsxs)("div",{className:"lds-ring",children:[Object(ra.jsx)("div",{}),Object(ra.jsx)("div",{}),Object(ra.jsx)("div",{}),null!==a&&Object(ra.jsx)("p",{className:"loading-percentage",children:a+"%"})]})})},ma=a(87);var xa={fetchPlaylists:Ot.fetchPlaylists,fetchTracks:Ot.fetchTrack,selectPlaylist:Ot.selectPlaylist,moveUpSong:Ot.moveUpSong,moveDownSong:Ot.moveDownSong,deleteFromList:Ot.deleteFromList,addToTracks:Dt.addToTracks,deleteFromTracks:Dt.deleteFromTracks},ya=Object(d.b)((function(e){var t=null,a=null,n=null;return e.lists.playlistsFetched&&Object.keys(e.lists.playlists).length>0&&((t=e.lists.selectedList?e.lists.playlists[e.lists.selectedList]:Object.values(e.lists.playlists)[0]).tracks&&(n=t.tracks.map((function(t){var a=e.lists.trackIndex[t],n=a.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t+", ":e+t}),""),r=Math.floor(a.duration/1e3/60),s=Math.round((a.duration-1e3*r*60)/1e3),c=e.tracks.stash.includes(a.id);return{name:a.name,album_name:a.album_name,artist:n,spotifyUrl:a.external_urls.spotify,duration:r+":"+s,previewSong:a.preview_url,image:a.album_image,isInStash:c,uri:a.uri,id:a.id}}))),a=Object.values(e.lists.playlists).map((function(e){return{name:e.name,image:e.image,id:e.id}}))),{token:e.auth.spotify.token,selectedPlaylist:e.lists.selectedList,playlists:e.lists.playlists,playlist:t,playlistsFetched:e.lists.playlistsFetched,tracksFetched:e.lists.tracksFetched,playlistTracks:n,allPlaylists:a,fetchProgress:e.lists.fetchProgress}}),xa)((function(e){var t=e.token,a=e.playlists,n=e.playlistsFetched,r=e.tracksFetched,s=e.playlist,c=e.playlistTracks,i=e.allPlaylists,o=e.selectedPlaylist;Object(l.useEffect)((function(){e.fetchPlaylists(t)}),[]),Object(l.useEffect)((function(){n&&0!==Object.keys(a).length&&!r&&Object.values(a).forEach((function(a){a.tracks||e.fetchTracks(t,a.id)}))}),[n]);var u=Object(l.useState)(""),b=Object(Qt.a)(u,2),j=b[0],d=b[1],p=Object(l.useState)(c),O=Object(Qt.a)(p,2),f=O[0],h=O[1],m=c||[];return Object(l.useEffect)((function(){if(j){var e=new ma.a(m,["name","artist","album_name"],{caseSensitive:!1});h(e.search(j))}else m&&h(m)}),[j,c]),s&&a&&f&&i&&c&&r||n&&r&&0===Object.keys(a).length?Object(ra.jsx)(pa,{onSelectPlaylist:function(t){return e.selectPlaylist(t)},onMoveUpSong:function(a){return e.moveUpSong(t,s.id,a,s.snapshot_id)},onMoveDownSong:function(a){return e.moveDownSong(t,s.id,a,s.snapshot_id)},onDeleteSong:function(a){return e.deleteFromList(t,s.id,c[a].uri,s.snapshot_id,a,s.tracks[a])},tracks:f,allPlaylists:i,playlist:s,selectedPlaylist:o,onAddToTracks:function(t){return e.addToTracks(s.tracks[t],c[t])},onDeleteFromTracks:function(t){return e.deleteFromTracks(t,s.tracks[t])},onSearchTerm:function(e){return d(e)},searchTerm:j,actionsDisabled:0==j}):Object(ra.jsx)(ha,{percentage:e.fetchProgress})}));a(107),a.p;var ga=function(e){return Object(ra.jsxs)("div",{className:"tracksview",children:[Object(ra.jsxs)("div",{className:"pagetitle",children:[Object(ra.jsx)("p",{class:"h5",children:"Tracks"}),Object(ra.jsx)("img",{src:ua})]}),Object(ra.jsxs)("div",{className:"trackstable",children:[Object(ra.jsx)(ca.a,{className:"t-tabletitle",size:"sm",children:Object(ra.jsx)("thead",{children:Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("th",{class:"text-light",children:" "}),Object(ra.jsx)("th",{class:"text-light",children:"Actions"})]})})}),Object(ra.jsx)("div",{className:"trackscontainer",children:(null===e.tracks||0===e.tracks.length)&&Object(ra.jsx)("span",{className:" new-playlist text-light",children:"Add tracks from your Playlist or search for new songs to add!"})||e.tracks.map((function(t,a){return Object(ra.jsxs)("div",{className:"t-songitem",children:[Object(ra.jsx)("img",{className:"t-songcover",src:t.image.url}),Object(ra.jsx)(oa.a,{borderless:"1",children:Object(ra.jsxs)("div",{className:"cardbody",children:[Object(ra.jsxs)("div",{className:"cardcontent",children:[Object(ra.jsx)("div",{className:"song-name",children:t.name}),Object(ra.jsxs)("div",{className:"song-artist",children:[Object(ra.jsx)("i",{class:"fas fa-user"}),t.artist]}),Object(ra.jsxs)("div",{className:"song-album",children:[Object(ra.jsx)("i",{class:"fas fa-record-vinyl"}),t.album_name]})]}),Object(ra.jsx)("div",{className:"t-actions",children:Object(ra.jsx)(ia.a,{variant:"light",class:"btn-sm",onClick:function(){return e.onDeleteTrack(a)},children:Object(ra.jsx)("img",{alt:"remove from track stash",src:ua,width:"16px",height:"16px"})})})]})})]})}))})]})]})};var va={deleteFromTracks:Dt.deleteFromTracks},ka=Object(d.b)((function(e){var t=e.tracks.stash;if(t)return{results:t.map((function(t){var a=e.lists.trackIndex[t],n=a.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t+", ":e+t}),""),r=Math.floor(a.duration/1e3/60),s=Math.round((a.duration-1e3*r*60)/1e3);return{name:a.name,album_name:a.album_name,artist:n,spotifyUrl:a.external_urls,duration:r+":"+s,previewSong:a.preview_url,image:a.album_image,uri:a.uri,id:a.id}})),token:e.auth.spotify.token}}),va)((function(e){return Object(ra.jsx)(ga,{tracks:e.results,onDeleteTrack:function(t){return e.deleteFromTracks(t)}})}));var Sa=function(e){return Object(ra.jsx)("div",{className:"authorized-view",children:Object(ra.jsxs)(Xt.a.Container,{id:"left-tabs-example",defaultActiveKey:"playlist",children:[Object(ra.jsxs)(qt.a,{id:"navbar",className:"navbar",children:[Object(ra.jsxs)(qt.a,{variant:"tabs",className:"mr-auto",id:"nav-container",children:[Object(ra.jsx)(qt.a.Item,{children:Object(ra.jsx)(qt.a.Link,{eventKey:"playlist",children:"Playlist"})}),Object(ra.jsx)(qt.a.Item,{children:Object(ra.jsx)(qt.a.Link,{eventKey:"search",children:"Search"})}),Object(ra.jsx)(qt.a.Item,{children:Object(ra.jsx)(qt.a.Link,{eventKey:"tracks",children:"Tracks"})})]}),Object(ra.jsxs)(qt.a,{children:[Object(ra.jsx)($t.a,{title:e.username,children:Object(ra.jsx)($t.a.Item,{onClick:e.logout,eventKey:"1",children:"Sign Out"})}),Object(ra.jsx)(Wt.a.Brand,{children:Object(ra.jsx)("img",{id:"listify-logo",src:Zt,alt:"Logo",height:"30",width:"30"})})]})]}),Object(ra.jsxs)(Xt.a.Content,{children:[Object(ra.jsx)(Xt.a.Pane,{eventKey:"search",children:Object(ra.jsx)(fa,{})}),Object(ra.jsx)(Xt.a.Pane,{eventKey:"playlist",children:Object(ra.jsx)(ya,{})}),Object(ra.jsx)(Xt.a.Pane,{eventKey:"tracks",children:Object(ra.jsx)(ka,{})})]})]})})},_a={initFbase:function(){return v(T)},authFbase:function(){return v(I)},setUid:function(e){return v(P,{uid:e})},logout:function(){return v(w)}};var Ta={fetchSpotifyUser:{initUser:function(){return v(V)},fetchUser:function(e){return v(H,{token:e})}}.fetchUser,logout:_a.logout},Ea=Object(d.b)((function(e){return{token:e.auth.spotify.token,user:e.user}}),Ta)((function(e){var t=e.token,a=e.user,n=Object(Jt.g)();return t||n.push("/login"),Object(l.useEffect)((function(){t&&e.fetchSpotifyUser(t)}),[t]),a?Object(ra.jsx)(Sa,{username:a.display_name||a.id||"",logout:function(){return e.logout()}}):Object(ra.jsx)(ha,{size:"lg"})})),Ia={initAuth:function(){return v(h)},saveSpotifyToken:function(e,t,a){return v(m,{token:e,expires_in:t,spotify_string:a})},saveSpotifyTokenError:function(e){return v(x,{error:e})},setSpotifyState:function(e){return v(y,{spotify_string:e})}};var Aa={saveSpotifyToken:Ia.saveSpotifyToken,saveSpotifyTokenError:Ia.saveSpotifyTokenError},Pa=Object(d.b)((function(e){return{auth:e.auth}}),Aa)((function(e){var t=Object(Jt.g)(),a=Object(Jt.h)();return a.state&&a.state===localStorage.getItem("spotifyState")||t.push("/login"),a.error&&(e.saveSpotifyTokenError(a.error),t.push("/login")),a.token&&a.expires_in&&(e.saveSpotifyToken(a.token,a.expires_in),localStorage.removeItem("spotifyState")),Object(ra.jsx)(ha,{size:"lg"})}));var wa=encodeURIComponent(["ugc-image-upload","playlist-modify-public","playlist-modify-private","playlist-read-private","playlist-read-collaborative","user-read-private"].reduce((function(e,t,a){return 0!==a?e+" "+t:t}))),Na="https://accounts.spotify.com/authorize?client_id=".concat("c0e19491232e4cadbff0efd339179f6d","&redirect_uri=").concat(encodeURIComponent("https://martinfalke.github.io/spotify-project/#"),"&scope=").concat(wa,"&response_type=token");a(110);var Ra=function(e){return Object(ra.jsxs)("div",{className:"start-view",children:[Object(ra.jsx)("img",{src:Zt,alt:"Listify logo"}),Object(ra.jsxs)("div",{className:"login-btn-wrapper",children:[Object(ra.jsx)(ia.a,{variant:"info",href:e.loginUrl,className:"login-btn",children:Object(ra.jsx)("i",{className:"fa fa-lg fa-spotify",children:"Login with Spotify"})}),Object(ra.jsx)("h3",{id:"intro-header",children:"Listify enables Spotify users to customize their playlists in a creative way"}),Object(ra.jsx)("p",{id:"intro",children:'Listify is divided into 3 unique sections to offer all the tools you need to customize your playlist. The first section is called "Playlist" and this is where you can customize your existing playlists by removing songs, switching places, add to your track stash or to search for a specific song/artist/album. The second section is called "Search" and here is where you search for new songs and add them into your stash of tracks and once you are done you can view your selected songs under "Tracks"'})]})]})};var La={setSpotifyState:Ia.setSpotifyState},Ca=Object(d.b)((function(e){return{token:e.auth.spotify.token}}),La)((function(e){var t=e.token,a=Object(Jt.g)(),n=Object(l.useState)(null),r=Object(Qt.a)(n,2),s=r[0],c=r[1];return Object(l.useEffect)((function(){var t=function(e){var t=new Uint8Array((e||10)/2);return window.crypto.getRandomValues(t),Array.from(t,(function(e){return e.toString(16).padStart(2,"0")})).join("")}();c(t),e.setSpotifyState(t)}),[]),Object(l.useEffect)((function(){t&&a.push("/")}),[t]),Object(ra.jsx)(Ra,{loginUrl:"".concat(Na,"&state=").concat(s)})}));var Ua={initFirebase:_a.initFbase,authenticateFirebase:_a.authFbase,setUid:_a.setUid,saveSpotifyToken:Ia.saveSpotifyToken},Fa=Object(d.b)((function(e){return{token:e.auth.spotify.token,fbaseApp:e.fbase.app,fbaseAuth:e.fbase.auth,fbaseUid:e.fbase.uid}}),Ua)((function(e){var t=e.fbaseApp,a=e.fbaseAuth,n=e.fbaseUid,r=e.token,s=Object(l.useState)(!1),c=Object(Qt.a)(s,2),i=c[0],o=c[1],u=Object(Jt.g)();return Object(l.useEffect)((function(){if(i){if(t&&a){0===sessionStorage.length&&e.authenticateFirebase();var s=localStorage.getItem("spotifyToken"),c=localStorage.getItem("spotifyExpiration");s&&c?new Date(Date.parse(c)).getTime()<Date.now()?(localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),sessionStorage.clear(),r||u.push("/login")):r||e.saveSpotifyToken(s):r||(sessionStorage.clear(),u.push("/login")),Object(Re.d)(a,(function(t){t&&!n&&e.setUid(t.uid)}))}}else o(!0),e.initFirebase()}),[a,r]),Object(ra.jsxs)(Jt.d,{children:[Object(ra.jsx)(Jt.b,{path:"/access_token=:token(.*)&token_type=Bearer&expires_in=:expires_in(.*)&state=:state(.*)",component:Pa}),Object(ra.jsx)(Jt.b,{path:"/error=:error(.*)&state=:state(.*)",component:Pa}),Object(ra.jsx)(Jt.b,{exact:!0,path:"/login",component:Ca}),Object(ra.jsx)(Jt.b,{exact:!0,path:"/",component:Ea}),Object(ra.jsx)(Jt.b,{path:"/*",render:function(){return Object(ra.jsx)(Jt.a,{to:"/"})}})]})})),Da=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,120)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};j.a.render(Object(ra.jsx)(u.a.StrictMode,{children:Object(ra.jsx)(d.a,{store:Ht,children:Object(ra.jsx)(zt.a,{hashType:"noslash",children:Object(ra.jsx)(Fa,{})})})}),document.getElementById("root")),Da()},98:function(e,t,a){},99:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.1af59278.chunk.js.map